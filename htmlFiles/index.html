<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KANTISPORTS HUB</title>

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- Topbar -->
  <header id="topbar" class="topbar">
    <div class="brand">
      <span class="brand-main">KANTISPORTS</span>
      <span class="brand-badge">HUB</span>
    </div>

    <div class="topbar-actions">
      <button id="compareModeBtn" class="btn btn-ghost" type="button">
        Vergleichmodus: AUS
      </button>

      <!-- Neue Sportart -->
      <button id="openAddSportBtn" class="btn btn-ghost" type="button">
        Sportart hinzufügen
      </button>

      <!-- Neuer Spieler -->
      <button id="openAddPlayerBtn" class="btn btn-primary" type="button">
        Spieler hinzufügen
      </button>
    </div>
  </header>

  <!-- Tabs -->
  <!-- WICHTIG: Sport Tabs werden in JS dynamisch eingefügt -->
  <nav id="tabbar" class="tabbar" aria-label="Seiten Tabs">
    <button class="tab active" data-target="start" type="button">Start</button>
    <!-- Sport Tabs kommen hier rein -->
    <button class="tab" data-target="aotk" type="button">AOTK</button>
  </nav>

  <main class="container">
    <!-- START -->
    <section class="page active" data-page="start">
      <div class="hero">
        <div class="hero-left">
          <h1 class="hero-title">KANTISPORTS HUB</h1>
          <p class="hero-subtitle">
            Spielerprofile pro Sportart. Sortieren nach Name oder Stats. Overall Rating pro Spieler.
            Vergleichmodus für zwei Spieler derselben Sportart.
            AOTK nutzt nur allgemeine Stats und zeigt AOTK Students, AOTK Teacher und Gesamt AOTK.
          </p>

          <div class="hero-cta">
            <button id="ctaAOTK" class="btn btn-primary" type="button">Zum AOTK</button>
            <button id="ctaFirstSport" class="btn btn-ghost" type="button">Zur ersten Sportart</button>
          </div>

          <div class="hero-metrics">
            <div class="metric">
              <div id="metricPlayers" class="metric-value">0</div>
              <div class="metric-label">Spieler erfasst</div>
            </div>
            <div class="metric">
              <div id="metricSports" class="metric-value">0</div>
              <div class="metric-label">Sportarten</div>
            </div>
            <div class="metric">
              <div class="metric-value">Live</div>
              <div class="metric-label">Ratings werden automatisch berechnet</div>
            </div>
          </div>
        </div>

        <div class="hero-right">
          <div class="hero-card">
            <div class="hero-card-title">So nutzt du die Plattform</div>
            <ol class="steps">
              <li>Sportart wählen und Spieler sortieren.</li>
              <li>Hover: Schnellinfos. Klick: Detailansicht.</li>
              <li>Vergleichmodus aktivieren und zwei Spieler wählen.</li>
              <li>AOTK: Teacher, Students, Gesamt basierend nur auf allgemeinen Stats.</li>
            </ol>
            <div class="note">
              Tipp: Du kannst Sportarten und Spieler hinzufügen. Die Webseite berechnet alles neu.
            </div>
          </div>
        </div>
      </div>

      <div class="feature-grid">
        <article class="feature">
          <div class="feature-title">Neue Sportarten</div>
          <div class="feature-text">Sportart definieren, sportbezogene Stats und Gewichte festlegen, Tab erscheint automatisch.</div>
        </article>
        <article class="feature">
          <div class="feature-title">Rollen</div>
          <div class="feature-text">Spieler ist Schüler oder Lehrer. AOTK wird getrennt und insgesamt berechnet.</div>
        </article>
        <article class="feature">
          <div class="feature-title">Overall Sportseite</div>
          <div class="feature-text">Overall nutzt allgemeine und sportbezogene Stats. Vergleich nutzt ebenfalls beide.</div>
        </article>
        <article class="feature">
          <div class="feature-title">AOTK</div>
          <div class="feature-text">AOTK verwendet nur allgemeine Werte wie Tempo, Körperbau, Sprungkraft, Ausdauer und Koordination.</div>
        </article>
      </div>
    </section>

    <!-- SPORT SEITEN (werden in JS dynamisch erzeugt) -->
    <div id="sportPagesMount"></div>

    <!-- AOTK -->
    <section class="page" data-page="aotk">
      <div class="page-head">
        <h2>AOTK</h2>
        <p>Athlete of the Kanti: Rankings basierend nur auf allgemeinen Stats.</p>
      </div>

      <div class="aotk-grid">
        <div class="aotk-box">
          <h3>SOTK (Student of the Kanti)</h3>
          <div id="aotkStudentsPanel" class="aotk-panel"></div>
        </div>

        <div class="aotk-box">
          <h3>TOTK (Teacher of the Kanti)</h3>
          <div id="aotkTeacherPanel" class="aotk-panel"></div>
        </div>

        <div class="aotk-box">
          <h3>AOTK (Athlete of the Kanti)</h3>
          <div id="aotkOverallPanel" class="aotk-panel"></div>
        </div>
      </div>

      <div class="page-head" style="margin-top:14px;">
        <h2>Ranking</h2>
        <p>Alle Personen nach AOTK Score (nur allgemeine Stats).</p>
      </div>
      <div class="cards" id="aotkRanking"></div>
    </section>
  </main>

  <!-- DETAIL MODAL -->
  <div id="detailModal" class="modal d-none">
    <div class="modal-card">
      <div class="modal-head">
        <div class="modal-title">Spieler Detail</div>
        <button id="closeDetailBtn" class="btn btn-ghost" type="button">Schliessen</button>
      </div>
      <div id="detailContent"></div>
    </div>
  </div>

  <!-- COMPARE MODAL -->
  <div id="compareModal" class="modal d-none">
    <div class="modal-card">
      <div class="modal-head">
        <div class="modal-title">Vergleich Ergebnis</div>
        <button id="closeCompareBtn" class="btn btn-ghost" type="button">Schliessen</button>
      </div>
      <div id="compareContent"></div>
    </div>
  </div>

  <!-- ADD PLAYER MODAL -->
  <div id="addPlayerModal" class="modal d-none">
    <div class="modal-card">
      <div class="modal-head">
        <div class="modal-title">Spieler hinzufügen</div>
        <button id="closeAddPlayerBtn" class="btn btn-ghost" type="button">Schliessen</button>
      </div>

      <div class="form">
        <label class="label">Rolle</label>
        <select id="newRole" class="input">
          <option value="student">Schüler</option>
          <option value="teacher">Lehrer</option>
        </select>

        <label class="label">Sportart</label>
        <select id="newSport" class="input"></select>

        <label class="label">Name</label>
        <input id="newName" class="input" type="text" placeholder="Vorname Nachname" />

        <label class="label">Bild URL</label>
        <input id="newImage" class="input" type="text" placeholder="https://..." />

        <div class="split">
          <div>
            <h4 class="form-title">Allgemeine Stats (AOTK Grundlage)</h4>
            <div id="generalStatFields" class="stat-fields"></div>
          </div>

          <div>
            <h4 class="form-title">Sportbezogene Stats</h4>
            <div id="sportStatFields" class="stat-fields"></div>
          </div>
        </div>

        <button id="savePlayerBtn" class="btn btn-primary" type="button">Spieler speichern</button>
        <div id="addPlayerHint" class="hint"></div>
      </div>
    </div>
  </div>

  <!-- ADD SPORT MODAL -->
  <div id="addSportModal" class="modal d-none">
    <div class="modal-card">
      <div class="modal-head">
        <div class="modal-title">Sportart hinzufügen</div>
        <button id="closeAddSportBtn" class="btn btn-ghost" type="button">Schliessen</button>
      </div>

      <div class="form">
        <label class="label">Sportart Name</label>
        <input id="sportNameInput" class="input" type="text" placeholder="z.B. Handball" />

        <label class="label">Sportart Key (klein, ohne Leerzeichen)</label>
        <input id="sportKeyInput" class="input" type="text" placeholder="z.B. handball" />

        <p class="hint">
          Stats für diese Sportart: Name + Gewicht. Gewichte müssen nicht perfekt sein, sie werden normalisiert.
        </p>

        <div class="form-row">
          <button id="addSportStatBtn" class="btn btn-ghost" type="button">Stat hinzufügen</button>
          <button id="resetSportStatBtn" class="btn btn-ghost" type="button">Stats zurücksetzen</button>
        </div>

        <div id="sportStatDefFields" class="stat-fields"></div>

        <button id="saveSportBtn" class="btn btn-primary" type="button">Sportart speichern</button>
        <div id="addSportHint" class="hint"></div>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
